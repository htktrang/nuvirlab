"use strict";(self.webpackChunknuvirlab_dev=self.webpackChunknuvirlab_dev||[]).push([[148],{1686:(e,t,a)=>{a.d(t,{R:()=>i});var s=a(4340),n=a(9004);function i(e,t,a,i){const r=structuredClone(i);(0,s.Q)(e,t,a,i),(0,n.R)(e,t,a,i),i.resetname&&(i.reset=()=>{},t.add(i,"reset").name(i.resetname).onChange((()=>{!function(e,t,a){const i=e.__controllers;a.visiblename&&(0,s.y)(t,i,a);a.labelname&&(0,n.M)(t,i,a)}(t,a,r),e.update()})))}},9004:(e,t,a)=>{a.d(t,{M:()=>r,R:()=>i});var s=a(3848),n=a(9477);function i(e,t,a,s){s.labelname&&t.add(s,"label").name(s.labelname).onFinishChange((e=>{a.getObjectByName("label"+a.name,!0).element.innerText=e})),s.labelColorname&&t.addColor(s,"labelColor").name(s.labelColorname).onChange((e=>{a.getObjectByName("label"+a.name,!0).element.style.color=o(e)})),s.labelVisiblename&&t.add(s,"labelVisible").name(s.labelVisiblename).onChange((t=>{a.getObjectByName("label"+a.name,!0).visible=t,e.update()}))}function r(e,t,a){a.labelname&&((0,s.Zn)(t,"label"),e.getObjectByName("label"+e.name,!0).element.innerText=a.label),a.labelColorname&&((0,s.Zn)(t,"labelColor"),e.getObjectByName("label"+e.name,!0).element.style.color=o(a.labelColor)),a.labelVisiblename&&(e.getObjectByName("label"+e.name,!0).visible=a.labelVisible)}function o(e){let t=new n.Ilk;return t.setHex(e),`rgb(${255*t.r},${255*t.g},${255*t.b})`}},6482:(e,t,a)=>{a.d(t,{JA:()=>r,JS:()=>o,z_:()=>i});var s=a(9477),n=a(1098);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=o((0,n.v)(e.setRmin),(0,n.v)(e.setRmax),(0,n.v)(e.setHeight),t);return a&&(s.rotation.x=Math.PI/2),s}function r(e,t){if(t.setTranslation){const a=(0,n.A)(t.setTranslation);e.position.set(a.x,a.y,a.z)}}function o(e,t,a,n){const i=new s.YT8([new s.Pa4(0,-a/2,0),new s.Pa4(0,a/2,0)]);let r=new s.bnF;r.absarc(0,0,t,0,2*Math.PI),r.holes.push((new s.y$t).absarc(0,0,e,0,2*Math.PI,!1));let o=new s.O7d(r,{steps:100,bevelEnabled:!1,extrudePath:i});return new s.Kj0(o,n)}},3209:(e,t,a)=>{var s=a(1098),n=a(6898),i=a(2537),r=a(234),o=a(9477),l=a(5713),m=a(2940);var c=a(6564),h=a(6482);function p(e){const t=function(e){const t=new o.Wid({color:e.params.crystal.setColor,transparent:!0,opacity:1,depthWrite:!0,wireframe:!1});return{coating:new o.Wid({color:"red",transparent:!0,opacity:.8,depthWrite:!0,wireframe:!1}),crystal:t}}(e),a=(0,c.Y)(e.params.crystal,t.crystal);a.name=e.params.crystal.name;let n=(0,s.v)(e.params.crystal.setHeight),i=(0,s.v)(e.params.coating.setHeight)/2-n/2-(0,s.v)(e.params.coating.setFrontThickness);a.position.y=i;const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=(0,s.v)(e.setRmin),n=(0,s.v)(e.setRmax),i=(0,s.v)(e.setHeight),r=(0,s.v)(e.setFrontThickness);const l=(0,h.JS)(a,n,i,t),m=(0,h.JS)(0,a,r,t),c=(0,h.JS)(0,a,r,t);m.position.y=i/2-r/2,c.position.y=-(i/2-r/2),l.name=e.name+"Tube",m.name=e.name+"Front",c.name=e.name+"End";const p=new o.ZAu;return p.add(l,m,c),p}(e.params.coating,t.coating);return r.name=e.params.coating.name,{crystal:a,coating:r}}var d=a(5140);var b=a(9559),g=a(4827),u=a(1686);var y=a(7108),v=a(2366);function w(e){const t=(0,v.g)(e),a=2*parseFloat(t[0]);return String(a)+" "+t[1]}const R={name:"Detector",setVisible:"1",description:"NaI scintillation detector",label:"Detector",setLabel:!0,setGui:!0,crystal:{name:"NaI",insert:"cylinder",setRmin:"0 cm",setRmax:"3.75 cm",setHeight:"7.5 cm",setMaterial:"NaI",setTranslation:"0 0 -34.31 cm",setVisible:"1",setColor:"yellow",forceSolid:!0},coating:{name:"Coating",insert:"cylinder",setRmin:"3.75 cm",setRmax:"4.05 cm",setHeight:"21.2 cm",setFrontThickness:"0.32 cm",setMaterial:"Aluminium",setTranslation:"0 0 -40.5 cm",setVisible:"1",setColor:"red",forceSolid:!1}};class f extends o.ZAu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.params={...R,...t},this.labels=[];const a=this.params.description+" (diameter = "+w(this.params.coating.setRmax)+", height = "+this.params.coating.setHeight+" )";(0,y.T)("inforComponents",a),this.meshes=p(this),this.add(this.meshes.crystal,this.meshes.coating),this.rotation.x=Math.PI/2;let n=(0,s.A)(this.params.coating.setTranslation);this.position.set(n.x,n.y,n.z),this.params.setLabel&&function(e){const t=e.params.coating;let a=(0,s.v)(t.setRmax),n=(0,s.v)(t.setHeight);const i=(0,d._)("NaI detector",1.1*a,n/2);e.add(i),e.name=e.params.name,i.name="label"+e.name,e.labels.push(i.name)}(this),this.params.setGui&&function(e,t){const a=t.gui.addFolder("Detector"),s={name:"Detector",visible:e.visible,visiblename:"Visible",label:e.params.label,labelname:"Label",labelColor:16777215,labelColorname:"Label color",labelVisible:!0,labelVisiblename:"Label visible",get resetname(){return"Reset "+this.name}};(0,u.R)(t,a,e,s);const n=(0,b.J)(e,e.params.crystal.name),i={name:"crystal",visible:n.visible,visiblename:"Visible",opacity:n.material.opacity,opacityname:"Opacity",get resetname(){return"Reset "+this.name}};(0,g.w)(t,a,n,i);const r=(0,b.J)(e,e.params.coating.name),o={name:"coating",visible:r.visible,visiblename:"Visible",opacity:r.children[0].material.opacity,opacityname:"Opacity",get resetname(){return"Reset "+this.name}};(0,g.w)(t,a,r,o)}(this,e)}}var C=a(4111);function x(e){const t=function(e){return{sample:new o.Wid({color:e.params.sample.setColor,transparent:!0,opacity:.5,depthWrite:!0,wireframe:!1}),container:new o.Wid({color:e.params.container.setColor,transparent:!0,opacity:.5,depthWrite:!0,wireframe:!1}),air:new o.Wid({transparent:!0,opacity:.5,depthWrite:!0,wireframe:!0})}}(e),a=function(e,t,a,n){const i=new o.Kj0(e,t);(0,c.wU)(i,{setRmax:n.setRmax,setHeight:n.setHeight});const r=new o.Kj0(e,a);(0,c.wU)(r,{setRmax:n.setRmin,setHeight:n.setHeight});const l=C.yU.fromMesh(i,0),m=C.yU.fromMesh(r,1),h=l.subtract(m),p=C.yU.toMesh(h,new o.yGw);p.material=i.material;const d=(0,c.Y)({setRmax:n.setRmin,setHeight:n.setFrontThickness},t),b=(0,s.v)(n.setHeight)/2-(0,s.v)(n.setFrontThickness)/2;d.position.y=b;const g=(0,c.Y)({setRmax:n.setRmin,setHeight:n.setEndThickness},t);g.position.y=-b;const u=new o.ZAu;return u.add(p,d,g),u.name=n.name,u}(new o.fHI(1,1,1,100),t.container,t.air,e.params.container);a.name=e.params.container.name;const n=(0,c.Y)(e.params.sample,t.sample);return n.name=e.params.sample.name,{container:a,sample:n}}const T={name:"sampleConatainer",setVisible:"1",description:"Sample container",label:"Sample",setLabel:!0,setGui:!0,sample:{name:"sample",type:"Volume",shape:"Cylinder",setRmin:"0 mm",setRmax:"27.5 mm",setHeight:"64 mm",setMaterial:"Leaf",setVisible:"1",setColor:"green"},container:{name:"container",insert:"cylinder",setRmin:"27.5 mm",setRmax:"28.5 mm",setHeight:"66 mm",setFrontThickness:"1 mm",setEndThickness:"1 mm",setMaterial:"polypropyline",setTranslation:"0 0 -42 mm",setVisible:"1",setColor:"blue"}};class k extends o.ZAu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.params={...T,...t},this.labels=[];const a=this.params.description+" (diameter = "+w(this.params.container.setRmax)+", height = "+this.params.container.setHeight+" )";(0,y.T)("inforComponents",a),this.meshes=x(this),this.add(this.meshes.container,this.meshes.sample),this.rotation.x=Math.PI/2;let n=(0,s.A)(this.params.container.setTranslation);this.position.set(n.x,n.y,n.z),this.params.setLabel&&function(e){const t=e.params.container;let a=e.params.label,n=(0,s.v)(t.setRmax),i=(0,s.v)(t.setHeight);const r=(0,d._)(a,1.1*n,i/2);e.add(r),e.name=e.params.name,r.name="label"+e.name,e.labels.push(r.name)}(this),this.params.setGui&&function(e,t){const a=t.gui.addFolder("Sample"),s={name:"Sample",visible:e.visible,visiblename:"Visible",label:e.params.label,labelname:"Label",labelColor:16777215,labelColorname:"Label color",labelVisible:!0,labelVisiblename:"Label visible",get resetname(){return"Reset "+this.name}};(0,u.R)(t,a,e,s);const n=(0,b.J)(e,"sample"),i={name:"sample",visible:n.visible,visiblename:"Visible",opacity:n.material.opacity,opacityname:"Opacity",get resetname(){return"Reset "+this.name}};(0,g.w)(t,a,n,i);const r=(0,b.J)(e,"container"),o={name:"container",visible:r.visible,visiblename:"Visible",opacity:r.children[0].material.opacity,opacityname:"Opacity",get resetname(){return"Reset "+this.name}};(0,g.w)(t,a,r,o)}(this,e)}}var H=a(372),V=a(7263);var L=a(1480),M=a(1494);const I={description:"Simulation: NaI(Tl) detector and sample container",infors:{macro:"",data:"https://drive.google.com/file/d/192ZbbJXxX9jadF1csvJxH486oujJ2NY-/view?usp=sharing",refs:{},authors:["Trang Hoang"],courses:{"Osaka University Hamadohri Environmental Radiation school and IEEE/NPSS Climate Change Initiative Workshop 2024":"https://indico.rcnp.osaka-u.ac.jp/event/2388/"}},color:6316128,setLabel:!0,setGui:!0,showInfor:!0,world:{setMaterial:"Air",setXLength:"1. m",setYLength:"1. m",setZLength:"1. m"},crystal:{name:"NaI",insert:"cylinder",setRmin:"0 mm",setRmax:"25.5 mm",setHeight:"51 mm",setMaterial:"NaI",setTranslation:"0 0 26.75 mm",setVisible:"1",setColor:"yellow",forceSolid:!0},coating:{name:"coating",insert:"cylinder",setRmin:"27.75 mm",setRmax:"29. mm",setHeight:"57 mm",setFrontThickness:"1.25 mm",setMaterial:"Aluminium",setTranslation:"0 0 28.5 mm",setVisible:"1",setColor:"red",forceSolid:!1},sample:{name:"sample",type:"Volume",shape:"Cylinder",setRmin:"0 mm",setRmax:"27.5 mm",setHeight:"64 mm",setMaterial:"Leaf",setVisible:"1",setColor:"green"},container:{name:"container",insert:"cylinder",setRmin:"27.5 mm",setRmax:"28.5 mm",setHeight:"66 mm",setFrontThickness:"1 mm",setEndThickness:"1 mm",setMaterial:"polypropyline",setTranslation:"0 0 -42 mm",setVisible:"1",setColor:"blue"}};class S extends o.ZAu{constructor(e,t,a){super(),this.params={...I,...a},this.size=e,this.gui=t,this.axis=!0,this.meshes=function(e){const t=e.size,a=new k(e,{container:e.params.container,sample:e.params.sample}),s={};e.params.crystal&&(s.crystal=e.params.crystal),e.params.coating&&(s.coating=e.params.coating);const n=new f(e,s);return n.rotation.z=Math.PI,{sample:a,detector:n,axes:(0,l.q)(t/2,"m",t/2e3,e.axis),beam:(0,m.I)()}}(this),this.add(this.meshes.axes,this.meshes.sample,this.meshes.detector,this.meshes.beam),this.zoomscale=.5,this.rotation.set(.05,-Math.PI/2,-.1),this.params.setGui&&function(e){const t=e.gui,a={name:"World",rotX:o.M8C.radToDeg(e.rotation.x),rotXname:"Rotation X",rotY:o.M8C.radToDeg(e.rotation.y),rotYname:"Rotation Y",rotZ:o.M8C.radToDeg(e.rotation.z),rotZname:"Rotation Z",bgColor:e.params.color,bgColorname:"Background",resetname:"Reset World"};(0,H.O)(e,t,e,a);const s=e.meshes.axes,n={name:"Axes",visible:s.visible,visiblename:"Visible"};(0,V.W)(e,t,s,n)}(this)}setBackgroundColor(){}update(){}zoom(e){}tick(e){}async init(){this.setBackgroundColor(this.params.color),this.zoom(this.zoomscale),(0,M.$)(this,this.params.showInfor),await(0,L.J)(this)}}var O=a(7897),W=a(6688),z=a(2036),E=a(1431),F=a(8925),N=a(717);let P,Z,j,A,J,Y,B,D,X=0;class G{constructor(e){this.worldParams={setXLength:I.world.setXLength,setYLength:I.world.setYLength,setZLength:I.world.setZLength},Object.keys(this.worldParams).forEach((e=>{if(e.includes("Length")){let t=(0,s.v)(this.worldParams[e]);X<t&&(X=t)}})),P=(0,n.d)(0,0,X),A=(0,r.a)(),Z=(0,z.U)(),j=(0,E.c)(),B=(0,O.k)(),J=new N.r(P,A,Z,j),e.append(Z.domElement,j.domElement),Y=(0,W.W)(P,j.domElement),D=new S(X,B,this.worldParams),(0,i.Wc)(P,10,10,10,"white",3),J.updatables.push(Y),A.add(P,D),D.setBackgroundColor=e=>{A.background=new o.Ilk(e),this.render()},D.zoom=e=>{P.position.z*=e,this.render()},D.update=()=>{this.render()};new F.w(e,P,Z,j).onResize=()=>{this.render()},Y.addEventListener("change",(()=>{this.render()}))}render(){Z.render(A,P),j.render(A,P)}start(){J.start()}stop(){J.stop()}async init(){await D.init()}}a(7164),"loading"==document.readyState?document.addEventListener("DOMContentLoaded",ready):async function(){const e=document.querySelector("#scene-container");e.style.display="block";const t=new G(e);await t.init(),t.render()}().catch((e=>{console.log(e)}))},7164:(e,t,a)=>{a.r(t)}},e=>{e.O(0,[395,464],(()=>{return t=3209,e(e.s=t);var t}));e.O()}]);