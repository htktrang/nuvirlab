"use strict";(self.webpackChunknuvirlab_dev=self.webpackChunknuvirlab_dev||[]).push([[877],{7915:(e,t,a)=>{a.d(t,{C:()=>i});var s=a(9774),n=a(3247);function i(e,t,a,i){const r=structuredClone(i);(0,s.h)(e,t,a,i),(0,n.i)(e,t,a,i),i.resetname&&(i.reset=()=>{},t.add(i,"reset").name(i.resetname).onChange((()=>{!function(e,t,a){const i=e.__controllers;a.visiblename&&(0,s.v)(t,i,a);a.labelname&&(0,n.S)(t,i,a)}(t,a,r),e.update()})))}},3247:(e,t,a)=>{a.d(t,{S:()=>r,i:()=>i});var s=a(7187),n=a(9437);function i(e,t,a,s){s.labelname&&t.add(s,"label").name(s.labelname).onFinishChange((e=>{a.getObjectByName("label"+a.name,!0).element.innerText=e})),s.labelColorname&&t.addColor(s,"labelColor").name(s.labelColorname).onChange((e=>{a.getObjectByName("label"+a.name,!0).element.style.color=o(e)})),s.labelVisiblename&&t.add(s,"labelVisible").name(s.labelVisiblename).onChange((t=>{a.getObjectByName("label"+a.name,!0).visible=t,e.update()}))}function r(e,t,a){a.labelname&&((0,s.ng)(t,"label"),e.getObjectByName("label"+e.name,!0).element.innerText=a.label),a.labelColorname&&((0,s.ng)(t,"labelColor"),e.getObjectByName("label"+e.name,!0).element.style.color=o(a.labelColor)),a.labelVisiblename&&(e.getObjectByName("label"+e.name,!0).visible=a.labelVisible)}function o(e){let t=new n.Q1f;return t.setHex(e),`rgb(${255*t.r},${255*t.g},${255*t.b})`}},1759:(e,t,a)=>{a.d(t,{L:()=>o,Mk:()=>r,Y4:()=>i});var s=a(9437),n=a(733);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=o((0,n.I)(e.setRmin),(0,n.I)(e.setRmax),(0,n.I)(e.setHeight),t);return a&&(s.rotation.x=Math.PI/2),s}function r(e,t){if(t.setTranslation){const a=(0,n.X)(t.setTranslation);e.position.set(a.x,a.y,a.z)}}function o(e,t,a,n){const i=new s.B6O([new s.Pq0(0,-a/2,0),new s.Pq0(0,a/2,0)]);let r=new s.ypk;r.absarc(0,0,t,0,2*Math.PI),r.holes.push((new s.wAk).absarc(0,0,e,0,2*Math.PI,!1));let o=new s.QCA(r,{steps:100,bevelEnabled:!1,extrudePath:i});return new s.eaF(o,n)}},8571:(e,t,a)=>{var s=a(733),n=a(194),i=a(1116),r=a(7485),o=a(9437),l=a(7346),m=a(1246);var c=a(1387),h=a(1759);function p(e){const t=function(e){const t=new o._4j({color:e.params.crystal.setColor,transparent:!0,opacity:1,depthWrite:!0,wireframe:!1});return{coating:new o._4j({color:"red",transparent:!0,opacity:.8,depthWrite:!0,wireframe:!1}),crystal:t}}(e),a=(0,c.T8)(e.params.crystal,t.crystal);a.name=e.params.crystal.name;let n=(0,s.I)(e.params.crystal.setHeight),i=(0,s.I)(e.params.coating.setHeight)/2-n/2-(0,s.I)(e.params.coating.setFrontThickness);a.position.y=i;const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=(0,s.I)(e.setRmin),n=(0,s.I)(e.setRmax),i=(0,s.I)(e.setHeight),r=(0,s.I)(e.setFrontThickness);const l=(0,h.L)(a,n,i,t),m=(0,h.L)(0,a,r,t),c=(0,h.L)(0,a,r,t);m.position.y=i/2-r/2,c.position.y=-(i/2-r/2),l.name=e.name+"Tube",m.name=e.name+"Front",c.name=e.name+"End";const p=new o.YJl;return p.add(l,m,c),p}(e.params.coating,t.coating);return r.name=e.params.coating.name,{crystal:a,coating:r}}var d=a(1007);var b=a(6019),g=a(2328),u=a(7915);var y=a(1411),v=a(1824);function w(e){const t=(0,v.Y)(e),a=2*parseFloat(t[0]);return String(a)+" "+t[1]}const f={name:"Detector",setVisible:"1",description:"NaI scintillation detector",label:"Detector",setLabel:!0,setGui:!0,crystal:{name:"NaI",insert:"cylinder",setRmin:"0 cm",setRmax:"3.75 cm",setHeight:"7.5 cm",setMaterial:"NaI",setTranslation:"0 0 -34.31 cm",setVisible:"1",setColor:"yellow",forceSolid:!0},coating:{name:"Coating",insert:"cylinder",setRmin:"3.75 cm",setRmax:"4.05 cm",setHeight:"21.2 cm",setFrontThickness:"0.32 cm",setMaterial:"Aluminium",setTranslation:"0 0 -40.5 cm",setVisible:"1",setColor:"red",forceSolid:!1}};class C extends o.YJl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.params={...f,...t},this.labels=[];const a=this.params.description+" (diameter = "+w(this.params.coating.setRmax)+", height = "+this.params.coating.setHeight+" )";(0,y.X)("inforComponents",a),this.meshes=p(this),this.add(this.meshes.crystal,this.meshes.coating),this.rotation.x=Math.PI/2;let n=(0,s.X)(this.params.coating.setTranslation);this.position.set(n.x,n.y,n.z),this.params.setLabel&&function(e){const t=e.params.coating;let a=(0,s.I)(t.setRmax),n=(0,s.I)(t.setHeight);const i=(0,d.f)("NaI detector",1.1*a,n/2);e.add(i),e.name=e.params.name,i.name="label"+e.name,e.labels.push(i.name)}(this),this.params.setGui&&function(e,t){const a=t.gui.addFolder("Detector"),s={name:"Detector",visible:e.visible,visiblename:"Visible",label:e.params.label,labelname:"Label",labelColor:16777215,labelColorname:"Label color",labelVisible:!0,labelVisiblename:"Label visible",get resetname(){return"Reset "+this.name}};(0,u.C)(t,a,e,s);const n=(0,b.P)(e,e.params.crystal.name),i={name:"crystal",visible:n.visible,visiblename:"Visible",opacity:n.material.opacity,opacityname:"Opacity",get resetname(){return"Reset "+this.name}};(0,g.C)(t,a,n,i);const r=(0,b.P)(e,e.params.coating.name),o={name:"coating",visible:r.visible,visiblename:"Visible",opacity:r.children[0].material.opacity,opacityname:"Opacity",get resetname(){return"Reset "+this.name}};(0,g.C)(t,a,r,o)}(this,e)}}var R=a(5897);function x(e){const t=function(e){return{sample:new o._4j({color:e.params.sample.setColor,transparent:!0,opacity:.5,depthWrite:!0,wireframe:!1}),container:new o._4j({color:e.params.container.setColor,transparent:!0,opacity:.5,depthWrite:!0,wireframe:!1}),air:new o._4j({transparent:!0,opacity:.5,depthWrite:!0,wireframe:!0})}}(e),a=function(e,t,a,n){const i=new o.eaF(e,t);(0,c.d4)(i,{setRmax:n.setRmax,setHeight:n.setHeight});const r=new o.eaF(e,a);(0,c.d4)(r,{setRmax:n.setRmin,setHeight:n.setHeight});const l=R.wv.fromMesh(i,0),m=R.wv.fromMesh(r,1),h=l.subtract(m),p=R.wv.toMesh(h,new o.kn4);p.material=i.material;const d=(0,c.T8)({setRmax:n.setRmin,setHeight:n.setFrontThickness},t),b=(0,s.I)(n.setHeight)/2-(0,s.I)(n.setFrontThickness)/2;d.position.y=b;const g=(0,c.T8)({setRmax:n.setRmin,setHeight:n.setEndThickness},t);g.position.y=-b;const u=new o.YJl;return u.add(p,d,g),u.name=n.name,u}(new o.Ho_(1,1,1,100),t.container,t.air,e.params.container);a.name=e.params.container.name;const n=(0,c.T8)(e.params.sample,t.sample);return n.name=e.params.sample.name,{container:a,sample:n}}const I={name:"sampleConatainer",setVisible:"1",description:"Sample container",label:"Sample",setLabel:!0,setGui:!0,sample:{name:"sample",type:"Volume",shape:"Cylinder",setRmin:"0 mm",setRmax:"27.5 mm",setHeight:"64 mm",setMaterial:"Leaf",setVisible:"1",setColor:"green"},container:{name:"container",insert:"cylinder",setRmin:"27.5 mm",setRmax:"28.5 mm",setHeight:"66 mm",setFrontThickness:"1 mm",setEndThickness:"1 mm",setMaterial:"polypropyline",setTranslation:"0 0 -42 mm",setVisible:"1",setColor:"blue"}};class T extends o.YJl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.params={...I,...t},this.labels=[];const a=this.params.description+" (diameter = "+w(this.params.container.setRmax)+", height = "+this.params.container.setHeight+" )";(0,y.X)("inforComponents",a),this.meshes=x(this),this.add(this.meshes.container,this.meshes.sample),this.rotation.x=Math.PI/2;let n=(0,s.X)(this.params.container.setTranslation);this.position.set(n.x,n.y,n.z),this.params.setLabel&&function(e){const t=e.params.container;let a=e.params.label,n=(0,s.I)(t.setRmax),i=(0,s.I)(t.setHeight);const r=(0,d.f)(a,1.1*n,i/2);e.add(r),e.name=e.params.name,r.name="label"+e.name,e.labels.push(r.name)}(this),this.params.setGui&&function(e,t){const a=t.gui.addFolder("Sample"),s={name:"Sample",visible:e.visible,visiblename:"Visible",label:e.params.label,labelname:"Label",labelColor:16777215,labelColorname:"Label color",labelVisible:!0,labelVisiblename:"Label visible",get resetname(){return"Reset "+this.name}};(0,u.C)(t,a,e,s);const n=(0,b.P)(e,"sample"),i={name:"sample",visible:n.visible,visiblename:"Visible",opacity:n.material.opacity,opacityname:"Opacity",get resetname(){return"Reset "+this.name}};(0,g.C)(t,a,n,i);const r=(0,b.P)(e,"container"),o={name:"container",visible:r.visible,visiblename:"Visible",opacity:r.children[0].material.opacity,opacityname:"Opacity",get resetname(){return"Reset "+this.name}};(0,g.C)(t,a,r,o)}(this,e)}}var L=a(8523),k=a(7399);var H=a(7986),V=a(6584);const M={description:"Simulation: NaI(Tl) detector and sample container",infors:{macro:"",data:"https://drive.google.com/file/d/192ZbbJXxX9jadF1csvJxH486oujJ2NY-/view?usp=sharing",refs:{},authors:["Trang Hoang"],courses:{"Osaka University Hamadohri Environmental Radiation school and IEEE/NPSS Climate Change Initiative Workshop 2024":"https://indico.rcnp.osaka-u.ac.jp/event/2388/"}},color:6316128,setLabel:!0,setGui:!0,showInfor:!0,world:{setMaterial:"Air",setXLength:"1. m",setYLength:"1. m",setZLength:"1. m"},crystal:{name:"NaI",insert:"cylinder",setRmin:"0 mm",setRmax:"25.5 mm",setHeight:"51 mm",setMaterial:"NaI",setTranslation:"0 0 26.75 mm",setVisible:"1",setColor:"yellow",forceSolid:!0},coating:{name:"coating",insert:"cylinder",setRmin:"27.75 mm",setRmax:"29. mm",setHeight:"57 mm",setFrontThickness:"1.25 mm",setMaterial:"Aluminium",setTranslation:"0 0 28.5 mm",setVisible:"1",setColor:"red",forceSolid:!1},sample:{name:"sample",type:"Volume",shape:"Cylinder",setRmin:"0 mm",setRmax:"27.5 mm",setHeight:"64 mm",setMaterial:"Leaf",setVisible:"1",setColor:"green"},container:{name:"container",insert:"cylinder",setRmin:"27.5 mm",setRmax:"28.5 mm",setHeight:"66 mm",setFrontThickness:"1 mm",setEndThickness:"1 mm",setMaterial:"polypropyline",setTranslation:"0 0 -42 mm",setVisible:"1",setColor:"blue"}};class P extends o.YJl{constructor(e,t,a){super(),this.params={...M,...a},this.size=e,this.gui=t,this.axis=!0,this.meshes=function(e){const t=e.size,a=new T(e,{container:e.params.container,sample:e.params.sample}),s={};e.params.crystal&&(s.crystal=e.params.crystal),e.params.coating&&(s.coating=e.params.coating);const n=new C(e,s);return n.rotation.z=Math.PI,{sample:a,detector:n,axes:(0,l.W)(t/2,"m",t/2e3,e.axis),beam:(0,m.c)()}}(this),this.add(this.meshes.axes,this.meshes.sample,this.meshes.detector,this.meshes.beam),this.zoomscale=.5,this.rotation.set(.05,-Math.PI/2,-.1),this.params.setGui&&function(e){const t=e.gui,a={name:"World",rotX:o.cj9.radToDeg(e.rotation.x),rotXname:"Rotation X",rotY:o.cj9.radToDeg(e.rotation.y),rotYname:"Rotation Y",rotZ:o.cj9.radToDeg(e.rotation.z),rotZname:"Rotation Z",bgColor:e.params.color,bgColorname:"Background",resetname:"Reset World"};(0,L.S)(e,t,e,a);const s=e.meshes.axes,n={name:"Axes",visible:s.visible,visiblename:"Visible"};(0,k.m)(e,t,s,n)}(this)}setBackgroundColor(){}update(){}zoom(e){}tick(e){}async init(){this.setBackgroundColor(this.params.color),this.zoom(this.zoomscale),(0,V.s)(this,this.params.showInfor),await(0,H.$)(this)}}var j=a(2264),F=a(6297),S=a(4049),O=a(4393),E=a(6266),N=a(4376);let z,Y,B,X,_,W,D,J,Z=0;class A{constructor(e){this.worldParams={setXLength:M.world.setXLength,setYLength:M.world.setYLength,setZLength:M.world.setZLength},Object.keys(this.worldParams).forEach((e=>{if(e.includes("Length")){let t=(0,s.I)(this.worldParams[e]);Z<t&&(Z=t)}})),z=(0,n.W)(0,0,Z),X=(0,r.B)(),Y=(0,S.K)(),B=(0,O.m)(),D=(0,j._)(),_=new N.F(z,X,Y,B),e.append(Y.domElement,B.domElement),W=(0,F.B)(z,B.domElement),J=new P(Z,D,this.worldParams),(0,i.mD)(z,10,10,10,"white",3),_.updatables.push(W),X.add(z,J),J.setBackgroundColor=e=>{X.background=new o.Q1f(e),this.render()},J.zoom=e=>{z.position.z*=e,this.render()},J.update=()=>{this.render()};new E.L(e,z,Y,B).onResize=()=>{this.render()},W.addEventListener("change",(()=>{this.render()}))}render(){Y.render(X,z),B.render(X,z)}start(){_.start()}stop(){_.stop()}async init(){await J.init()}}a(1180),"loading"==document.readyState?document.addEventListener("DOMContentLoaded",ready):async function(){const e=document.querySelector("#scene-container");e.style.display="block";const t=new A(e);await t.init(),t.render()}().catch((e=>{console.log(e)}))},1180:(e,t,a)=>{a.r(t)}},e=>{e.O(0,[708,566,441],(()=>{return t=8571,e(e.s=t);var t}));e.O()}]);